# User Stories для MVP: Система прогнозирования и проактивных уведомлений

## Формат: Как [персона], я хочу [действие], чтобы [ценность]

---

## EPIC 1: Прогнозирование отключений

### US-1.1: Просмотр прогноза для своего адреса
**Как:** Зарегистрированный пользователь  
**Я хочу:** Видеть прогноз вероятности отключений на неделю вперед для моего адреса  
**Чтобы:** Планировать свою неделю и подготовиться к возможным отключениям

**Критерии приемки (AC):**
- [ ] На странице "Мои адреса" отображается прогноз на 7 дней
- [ ] Для каждого дня показывается вероятность отключения по типам (электричество, вода, отопление)
- [ ] Вероятность отображается в процентах и цветовой индикацией (зеленый: 0-20%, желтый: 21-50%, красный: 51-100%)
- [ ] При нажатии на день можно увидеть детали: историческую частоту, временные паттерны
- [ ] Прогноз обновляется ежедневно в 00:00

**Приоритет:** Must Have (P0)

---

### US-1.2: Просмотр истории отключений
**Как:** Пользователь, интересующийся статистикой  
**Я хочу:** Видеть историю отключений в своем доме за последние 6 месяцев  
**Чтобы:** Понять паттерны и планировать долгосрочно

**Критерии приемки (AC):**
- [ ] На странице адреса есть вкладка "История"
- [ ] Отображается календарь с отмеченными днями отключений
- [ ] Можно фильтровать по типам отключений
- [ ] Показывается статистика: частота, средняя длительность, самые проблемные месяцы
- [ ] Данные кэшируются для быстрой загрузки

**Приоритет:** Should Have (P1)

---

## EPIC 2: Проактивные уведомления

### US-2.1: Настройка уведомлений
**Как:** Пользователь, который не хочет получать спам  
**Я хочу:** Настроить типы уведомлений и условия их получения  
**Чтобы:** Получать только релевантную информацию

**Критерии приемки (AC):**
- [ ] В настройках есть раздел "Уведомления"
- [ ] Можно выбрать типы отключений для уведомлений (электричество, вода, отопление)
- [ ] Можно выбрать способы доставки (Push, SMS, Email)
- [ ] Можно указать порог вероятности для уведомлений (например, только >50%)
- [ ] Можно выбрать время для "тихих" часов
- [ ] Настройки сохраняются в профиле пользователя

**Приоритет:** Must Have (P0)

---

### US-2.2: Push-уведомление о прогнозе
**Как:** Пользователь с приложением  
**Я хочу:** Получать push-уведомление утром, если вероятность отключения высокая  
**Чтобы:** Подготовиться к отключению в течение дня

**Критерии приемки (AC):**
- [ ] Уведомление отправляется в 8:00, если вероятность отключения >50%
- [ ] Текст: "⚠️ Высокая вероятность отключения [тип] сегодня в вашем районе (65%)"
- [ ] Нажатие на уведомление открывает детали прогноза
- [ ] Уведомления не дублируются (максимум 1 раз в день)

**Приоритет:** Must Have (P0)

---

### US-2.3: SMS для критичных ситуаций (Premium)
**Как:** Пользователь с премиум-подпиской  
**Я хочу:** Получать SMS о критичных отключениях  
**Чтобы:** Не пропустить важную информацию, если телефон выключен

**Критерии приемки (AC):**
- [ ] SMS отправляется только для критичных ситуаций (вероятность >75%)
- [ ] SMS содержит: тип отключения, адрес, прогнозируемое время, вероятная длительность
- [ ] Стоимость SMS покрывается премиум-подпиской
- [ ] SMS отправляется не чаще 1 раза в день
- [ ] Пользователь может отключить SMS в настройках

**Приоритет:** Should Have (P1)

---

## EPIC 3: Страница прогноза города

### US-3.1: Карта прогноза отключений
**Как:** Пользователь, планирующий поездку по городу  
**Я хочу:** Видеть на карте районы с высокой вероятностью отключений  
**Чтобы:** Выбрать альтернативный маршрут или время

**Критерии приемки (AC):**
- [ ] На главной странице есть вкладка "Прогноз"
- [ ] Карта показывает районы с цветовой индикацией вероятности
- [ ] При наведении показывается детализация: район, вероятность, тип отключения
- [ ] Можно переключиться между прогнозами на сегодня/завтра/неделю
- [ ] Данные обновляются ежедневно

**Приоритет:** Could Have (P2)

---

## EPIC 4: Рекомендации

### US-4.1: Персональные рекомендации по подготовке
**Как:** Пользователь с высокой вероятностью отключения  
**Я хочу:** Получать рекомендации, как подготовиться к отключению  
**Чтобы:** Минимизировать неудобства

**Критерии приемки (AC):**
- [ ] При вероятности >50% показываются рекомендации
- [ ] Рекомендации зависят от типа отключения:
  - Электричество: зарядить устройства, запастись водой, проверить фонари
  - Горячая вода: набрать воды в ванну, нагреть заранее
  - Отопление: утеплить окна, включить обогреватель
- [ ] Рекомендации отображаются как чек-лист
- [ ] Можно отметить выполненные пункты

**Приоритет:** Should Have (P1)

---

## EPIC 5: Премиум-функции

### US-5.1: Расширенная статистика
**Как:** Премиум-пользователь, интересующийся деталями  
**Я хочу:** Видеть детальную статистику по району и УК  
**Чтобы:** Принимать информированные решения

**Критерии приемки (AC):**
- [ ] Доступен раздел "Аналитика" (только для Premium)
- [ ] Показывается сравнение районов по частоте отключений
- [ ] Показывается рейтинг УК по скорости устранения
- [ ] Доступен экспорт данных для личного учета
- [ ] Данные обновляются еженедельно

**Приоритет:** Could Have (P2)

---

## Приоритизация задач (MoSCoW Method)

### Must Have (P0) - MVP
1. US-1.1: Просмотр прогноза для своего адреса
2. US-2.1: Настройка уведомлений
3. US-2.2: Push-уведомление о прогнозе

### Should Have (P1) - Повышает ценность
4. US-1.2: Просмотр истории отключений
5. US-2.3: SMS для критичных ситуаций (Premium)
6. US-4.1: Персональные рекомендации

### Could Have (P2) - Nice to have
7. US-3.1: Карта прогноза отключений
8. US-5.1: Расширенная статистика

### Won't Have (P3) - На будущее
- Голосовые уведомления
- Интеграция с умным домом
- API для третьих лиц

---

## Оценка сложности (Story Points)

| US | Описание | Story Points | Команда (чел.-дни) |
|----|----------|--------------|-------------------|
| US-1.1 | Прогноз для адреса | 8 | 12 |
| US-1.2 | История | 5 | 7 |
| US-2.1 | Настройки | 3 | 4 |
| US-2.2 | Push | 5 | 7 |
| US-2.3 | SMS | 8 | 10 |
| US-3.1 | Карта | 13 | 18 |
| US-4.1 | Рекомендации | 5 | 7 |
| US-5.1 | Аналитика | 8 | 12 |

**MVP (P0):** 16 story points ≈ 23 человеко-дня  
**MVP + P1:** 34 story points ≈ 47 человеко-дней  
**Полная версия:** 55 story points ≈ 77 человеко-дней

---

## Оценка через Kano Model

**Базовые ожидания (Must-Be):**
- US-1.1: Прогноз для адреса (если нет - пользователь уйдет)
- US-2.1, US-2.2: Настройки и push (ожидаемое поведение)

**Ожидания (One-Dimensional):**
- US-2.3: SMS (больше способов = больше удовлетворенность)
- US-1.2: История (дает ощущение контроля)

**Удовлетворенность (Attractive):**
- US-4.1: Рекомендации (неожиданная забота)
- US-5.1: Аналитика (приятный бонус)

**Индифферентные:**
- US-3.1: Карта прогноза (некоторые не используют карты)

**Обратные (Reverse):**
- Слишком частые уведомления
- Низкая точность прогнозов

---

## Метрики успеха (HEART Framework)

### Happiness (Счастье)
- **Метрика**: NPS по фиче (Net Promoter Score)
- **Целевое**: >30
- **Измерение**: Через опрос в приложении

### Engagement (Вовлеченность)
- **Метрика**: Частота открытий раздела "Прогноз"
- **Целевое**: +40% к недельной активности
- **Измерение**: Аналитика в приложении

### Adoption (Принятие)
- **Метрика**: % пользователей, включивших уведомления
- **Целевое**: 60%+ от активных пользователей за первый месяц
- **Измерение**: Статистика подписок

### Retention (Удержание)
- **Метрика**: 30-дневный retention
- **Целевое**: +15% к текущему retention
- **Измерение**: Когортный анализ

### Task Success (Успешность выполнения задач)
- **Метрика**: % пользователей, подготовившихся к отключению
- **Целевое**: 50%+ отметили в чек-листе хотя бы 2 пункта
- **Измерение**: Трекинг использования рекомендаций

---

## Зависимости между задачами

```
US-1.1 (Прогноз) → US-2.2 (Push) → US-2.3 (SMS)
         ↓                ↓
US-1.2 (История)    US-4.1 (Рекомендации)
         ↓                ↓
US-5.1 (Аналитика)  US-3.1 (Карта)
```

**Критический путь:** US-1.1 → US-2.1 → US-2.2

---

## Риски и митигация

**Риск 1**: Низкая точность прогнозов
- **Митигация**: Начать с консервативных прогнозов, собирать feedback

**Риск 2**: Слишком частые уведомления → отписки
- **Митигация**: Агрессивные настройки по умолчанию, быстрое обучение алгоритма

**Риск 3**: Технические проблемы с интеграцией
- **Митигация**: Инкрементальный запуск (beta → GA)

**Риск 4**: Низкое принятие премиум-функций
- **Митигация**: A/B тестирование цен и функций

